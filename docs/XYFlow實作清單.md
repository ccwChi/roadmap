# XYFlow 功能實作清單

## 📋 使用說明
- ✅ 已完成
- 🔄 進行中
- ⏸️ 暫停/不需要
- 📝 待實作

**請在每個功能前標記您的決定：**
- `[✓]` = 要這個功能
- `[✗]` = 不要這個功能
- `[?]` = 需要討論

---

## Phase 1: 基礎優化 (本次)

### 1.1 卡片外觀優化
- [✓] 移除粗藍色邊框 → ✅ **已完成**
- [✓] 清爽的灰色細邊框 → ✅ **已完成**
- [✓] 半透明毛玻璃背景 → ✅ **已完成**
- [✗] 頂部色條（用戶不需要）→ ✅ **已移除**
- [✓] Hover 上浮效果 → ✅ **已完成**
- [✓] 連接點加大 (w-3 h-3) → ✅ **已完成**

### 1.2 直接編輯功能
- [✓] 點擊標題進入編輯模式 → ✅ **已完成**
- [✓] Blur 自動保存 → ✅ **已完成**
- [✓] Ctrl+S 保存 → ✅ **已完成**
- [✓] Escape 取消編輯 → ✅ **已完成**
- [✗] Enter 保存（用戶不需要）→ ✅ **已移除**

### 1.3 連線樣式優化
- [✓] 多種連線類型（直線、曲線、階梯線）
  - 實作方式：EdgeType 選擇器
  - 數據影響：edge 增加 `type` 字段
  - 預計時間：15分鐘

- [✓] 連線標籤（關係說明）
  - 實作方式：可編輯的 edge label
  - 數據影響：edge 增加 `label` 字段
  - 預計時間：20分鐘

- [✓] 虛線/實線選項
  - 實作方式：style 屬性
  - 數據影響：edge 增加 `style` 字段
  - 預計時間：10分鐘

---

## Phase 2: 互動增強

### 2.1 迷你工具欄 (Mini Toolbar)
- [✓] Hover 節點時顯示工具欄
  - 位置：節點右上角
  - 預計時間：30分鐘

- [✗] 快捷按鈕：複製節點
  - 功能：一鍵複製節點
  - 預計時間：15分鐘

- [✓] 快捷按鈕：刪除節點
  - 功能：一鍵刪除（帶確認）
  - 預計時間：10分鐘

- [✓] 快捷按鈕：改變顏色
  - 功能：顏色選擇器
  - 預計時間：20分鐘

- [✓] 快捷按鈕：添加連線
  - 功能：快速連接模式
  - 預計時間：25分鐘

### 2.2 撤銷/重做系統
- [✓] Ctrl+Z 撤銷
  - 實作方式：歷史記錄管理
  - 數據影響：無（僅內存）
  - 預計時間：40分鐘

- [✓] Ctrl+Y 重做
  - 預計時間：10分鐘（與撤銷一起）

- [✓] UI 指示器（可撤銷/重做狀態）
  - 預計時間：15分鐘

### 2.3 多種節點形狀
- [✓] 矩形節點（默認）
  - 已完成 ✅

- [✓] 圓形節點
  - 用途：概念、主題
  - 數據影響：node 增加 `shape: 'circle'`
  - 預計時間：25分鐘

- [✓] 菱形節點
  - 用途：決策點
  - 預計時間：20分鐘

- [✓] 六邊形節點
  - 用途：流程步驟
  - 預計時間：20分鐘

- [✓] 形狀選擇器
  - UI：右鍵菜單或工具欄
  - 預計時間：15分鐘

---

## Phase 3: 高級功能

### 3.1 節點分組
- [✓] 框選多個節點
  - 功能：拖動框選
  - 預計時間：30分鐘

- [✓] 創建群組
  - 功能：群組背景、標題
  - 數據影響：新的 `group` 節點類型
  - 預計時間：45分鐘

- [✓] 群組摺疊/展開
  - 功能：隱藏群組內容
  - 預計時間：30分鐘

### 3.2 對齊與佈局
- [✓] 拖動時顯示對齊線
  - 功能：智能對齊輔助
  - 數據影響：無
  - 預計時間：35分鐘

- [✓] 吸附功能
  - 功能：自動對齊到網格或其他節點
  - 預計時間：20分鐘

- [✓] 自動排列按鈕
  - 算法：hierarchical / force-directed
  - 預計時間：30分鐘

### 3.3 節點樣式自定義
- [✓] 調整節點大小
  - 功能：拖動邊角
  - 數據影響：node 增加 `width`, `height`
  - 預計時間：40分鐘

- [✓] 邊框樣式選項
  - 選項：實線、虛線、粗細
  - 預計時間：20分鐘

- [ ] 背景樣式
  - 選項：純色、漸變、透明度
  - 預計時間：25分鐘

- [ ] 陰影效果
  - 選項：無、小、中、大
  - 預計時間：15分鐘

---

## Phase 4: 輔助功能

### 4.1 導航輔助
- [ ] MiniMap（縮略圖）
  - 位置：右下角
  - 功能：全局視圖、快速定位
  - 數據影響：無
  - 預計時間：5分鐘（取消註釋即可）

- [ ] 搜索功能
  - 功能：搜索並高亮節點
  - UI：搜索框 + 結果列表
  - 預計時間：35分鐘

- [✓] 標籤過濾
  - 功能：按標籤篩選顯示
  - 預計時間：25分鐘

### 4.2 註釋與標記
- [ ] 文字註釋節點
  - 類型：純文字、無邊框
  - 數據影響：新的節點類型
  - 預計時間：30分鐘

- [ ] 區域高亮
  - 功能：矩形/圓形高亮背景
  - 預計時間：25分鐘

- [ ] 便籤功能
  - 功能：sticky note 樣式
  - 預計時間：30分鐘

### 4.3 導出功能
- [ ] 導出為 PNG
  - 功能：下載當前視圖
  - 預計時間：20分鐘

- [ ] 導出為 SVG
  - 功能：矢量圖導出
  - 預計時間：25分鐘

- [ ] 導出為 PDF
  - 需要：額外庫
  - 預計時間：40分鐘

---

## Phase 5: 性能優化（節點 > 500 時考慮）

### 5.1 渲染優化
- [ ] 虛擬化（Virtualization）
  - 僅渲染可見節點
  - 預計時間：60分鐘

- [ ] 節點摺疊
  - 功能：隱藏詳細內容
  - 數據影響：node 增加 `collapsed`
  - 預計時間：35分鐘

### 5.2 加載優化
- [ ] 懶加載卡片內容
  - 功能：僅加載可見卡片的詳細內容
  - 預計時間：45分鐘

---

## 📊 統計信息

### 已完成功能
- 基礎卡片設計 ✅
- 直接編輯標題 ✅
- 連接點優化 ✅

### 功能數量統計
- **總功能數**: 50+
- **Phase 1**: 11 項（8 已完成）
- **Phase 2**: 14 項
- **Phase 3**: 13 項
- **Phase 4**: 9 項
- **Phase 5**: 3 項

### 預估實作時間
- **Phase 1 剩餘**: ~45 分鐘
- **Phase 2**: ~3 小時
- **Phase 3**: ~4 小時
- **Phase 4**: ~3.5 小時

---

## 🎯 建議優先實作順序

根據實用性和實作難度，建議順序：

### 第一批（立即實作）
1. [✓] 連線標籤 - 15分鐘
2. [✓] 連線樣式選擇 - 15分鐘
3. [✓] 迷你工具欄 - 30分鐘
4. [✓] 撤銷/重做 - 50分鐘

### 第二批（短期）
5. [ ] 多種節點形狀 - 1小時
6. [ ] MiniMap - 5分鐘
7. [ ] 顏色選擇器 - 20分鐘

### 第三批（中期）
8. [ ] 節點分組 - 1.5小時
9. [ ] 對齊輔助線 - 1小時
10. [ ] 搜索功能 - 35分鐘

---

## ✏️ 請在此標記您的選擇

**Phase 1 剩餘功能（連線相關）:**
- [✓] 要 / [ ] 不要 - 連線標籤
- [✓] 要 / [ ] 不要 - 多種連線類型
- [✓] 要 / [ ] 不要 - 虛線/實線

**Phase 2 功能:**
- [✓] 要 / [ ] 不要 - 迷你工具欄（整套）
- [✓] 要 / [ ] 不要 - 撤銷/重做
- [✓] 要 / [ ] 不要 - 多種節點形狀

**其他您特別想要的功能:**
- 


**不需要的功能（請列出）:**
- 


---

請告訴我您的選擇，我會按照優先級逐步實作！
